#! /bin/bash

ENVIRONMENT=$1
DATABASE_ENDPOINT=$2
DATABASE_USER=$3
DATABASE_PASSWORD=$4
DATABASE_NAME=$5
DATABASE_PORT=$6

if [[ $OSTYPE == 'darwin'* ]]; then
  sed -i '' "s/POSTGRES_HOST=.*/POSTGRES_HOST=$DATABASE_ENDPOINT/" "$ENVIRONMENT.env"
  sed -i '' "s/POSTGRES_PORT=.*/POSTGRES_PORT=$DATABASE_PORT/" "$ENVIRONMENT.env"
  sed -i '' "s/POSTGRES_DB=.*/POSTGRES_DB=$DATABASE_NAME/" "$ENVIRONMENT.env"
  sed -i '' "s/POSTGRES_USER=.*/POSTGRES_USER=$DATABASE_USER/" "$ENVIRONMENT.env"
  sed -i '' "s/POSTGRES_PASSWORD=.*/POSTGRES_PASSWORD=$DATABASE_PASSWORD/" "$ENVIRONMENT.env"
else
  sed -i "s/POSTGRES_HOST=.*/POSTGRES_HOST=$DATABASE_ENDPOINT/" "$ENVIRONMENT.env"
  sed -i "s/POSTGRES_PORT=.*/POSTGRES_PORT=$DATABASE_PORT/" "$ENVIRONMENT.env"
  sed -i "s/POSTGRES_DB=.*/POSTGRES_DB=$DATABASE_NAME/" "$ENVIRONMENT.env"
  sed -i "s/POSTGRES_USER=.*/POSTGRES_USER=$DATABASE_USER/" "$ENVIRONMENT.env"
  sed -i "s/POSTGRES_PASSWORD=.*/POSTGRES_PASSWORD=$DATABASE_PASSWORD/" "$ENVIRONMENT.env"
fi